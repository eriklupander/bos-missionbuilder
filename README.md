# bos-missionbuilder
Web-based mission builder for Il-2: BoS

Currently work-in-progress. The map system is getting there and the actual .Mission file generator on the java side can create working missions from unit tests. However, there is no glue between the GUI and the mission file yet.

The web GUI generates an intermediate mission format that abstracts away a lot of the complexity of the BoS/RoF mission file format. These intermediate files are plain JSON documents which currently are stored server-side in an embedded NoSQL database (ElasticSearch).

This software can be run by individual users on their local machines, but the long-term objective is to host this on Amazon EC2 or similar and provide an account system so users can log in and manage their missions there. Of course users will have the capability to export the mission to BoS format at any time. Will probably be a zip archive with the .Mission file and at least one .eng language / strings file.

License: MIT license
Frameworks Web: jQuery, Handlebars, Twitter Bootstrap
Frameworks Server: Spring Boot, ElasticSearch, Java 8

# TODO
Fix map drag, select etc. behaviour.
Fix bug where one cannot seect again after a select due to state.STATE problem.


Presentation text

The early alpha BoS Simple Mission Builder (SMB) is a 3rd party standalone mission builder for creating simple single player missions for IL-2: Battle of Stalingrad

TLDR: Extremely unofficial early alpha Web browser based mission builder for creating simple missions. Download, unzip, configure and run. Probably extremely buggy.


The main objective of SMB is to provide a mean to create simple single player missions without having access to the to-be-released official Full Mission Builder, while providing more functionality than the current Quick Mission builder present in BoS today.

Main features:
* Fully zoomable/pannable map of Stalingrad (extracted from BoS game resources)
* Specification of date, time and mission name/briefing.
* Allows placing of air, ground and static object groups anywhere on the map
* Editing of basic group properties (size, type, altitude, speed, heading...)
* Air and ground units can be given waypoints they follow. Includes altitude and speed changes.
* Each group can contain up to 24 units. This may result in really bad framerates if your system cannot handle it.
* Each waypoint may be given a Command to be executed. Supported commands are:
** START - Start flight from ground. Should be first waypoint of air groups not starting in the air and placed very close to the starting position
** LAND - Land flight. Should be last waypoint.
** ATTACK_AREA - Will search for targets in the designated area, includes "radius" property.
** ATTACK_TARGET - Attack target specified from list of selectable groups. Note - make sure you select a target from the enemy side...
** COVER - Escort the group specified from list of selectable groups.
* Includes city, airfield, train station and bridges loaded from BoS /Template folder. Note that only objects within the mission area bounds are loaded. Loading all cities does work in-game but mission load times becomes very very long.
* Option to automatically generate some AAA assets on airfields having an adjacent LAND command on them.
* Briefing map will currently show waypoint path of own flight and enemy ground targets. Will add more fine-granular control of briefing map icons later.
* Exports .Mission and .eng files to %INSTALL_DIR%/data/Missions/webmissions folder
* Note: Due to some limitation in BoS, one MUST start BoS in Offline mode (just like Chir Front missions). This means unlocks cannot be used. Regrettably, it also seems as AI planes cannot be equipped with unlocks.
* Note: There's no absolute guarantee generated missions will work. If the BoS GUI just returns you directly to the Missions list after starting to show the Loading splash screen, something is invalid in the .Mission file. Also, if you for some reason edit the generated .eng file manually, it must be saved in UTF-16 Lower Endian encoding or the mission won't load.

SMB works by using a Web-based GUI to drag n drop units onto the map, setting waypoints (with optional commands on them) and then selecting the "Export to disk" meny option to write a .Mission and a .eng file to a %INSTALLDIR%/data/Mission/webmissions folder.

Missions may take a long time to load, especially for the first mission of the day. The RoF FMB manual states that missions loaded from the textual .Mission format takes a lot longer to load. Expect 1-2 minutes for the first mission since BoS seems to do some kind of roads generation thing on first mission load.
The mission generation performed by the SMB is based on looking at .Mission files generated by BoS tracks and the Rise of Flight FMB manual. There are many features missing from SMB that I assume the FMB will later support.

License: The SMB is Open Source software licensed under the MIT License. For full License details, please see: 
Disclaimer: I am not in any way affiliated with 1C or 777 and I do NOT have beta access to the BoS FMB or any other non-public information. 

Requirements:
Java 8 Runtime Environment installed. Earlier versions of Java are NOT supported since SMB utilizes a lot of the new API's introduced in Java 8.
SMB requires a copy of BoS to be installed on the users hard drive as it utilizes some of the files found under the /Template directory.
SMB web GUI is _only_ tested using recent versions of Google Chrome. No other browsers are currently supported, though at least Firefox should work moderately well.

Installation:
For those of you that have tried the Bosparser application, SMB installs in a more or less identical way. Java 8 is also required. Install from Oracle. If you think you have Java installed, open a command shell and type 'java -version' without ' to see Java runtime version.
1. Download the install zip from Dropbox:
2. Unzip somewhere on your hard drive
3. Open the configuration/application.properties file. Change the property bos.data.directory to point at your BoS installations /data folder. This property is used to load files from /Template as well as saving your missions directly into the /data/Missions/webmissions folder
4. Start the application by executing bos-smb.bat file. Java may give you an alert about Network access, I think you can ignore it but otherwise click yes.
5. Open your Web Browser and type "localhost". The SMB application should load, displaying the BoS map. Note: If you are using bosparser (or any other web server software using port 80) you will need to modify the http.port setting in configuration/application.properties to some other port number and then type localhost:[portnumber] instead in your browser.


Known issues:
-- Extremely limited set of loadouts. Since I do not actually know internal loadout IDs of BoS I have to look at generated .Mission files and try to figure out which "payloadId" for a given plane that matches a selectable payload in the GUI. Also - it seems as AI planes cannot use loadouts that needs to be unlocked.
-- The object selection/dragging is a bit clunky, especially when one wants to drag the map as well. Working on that...
-- START/LAND commands "works", but since I havn't been able to figure out how to extract landing/start coordinates from within BoS, AI planes will start/land outside of runways in weird directions. I strongly suggest letting AI flights start in the air.
-- COVER command seems to work. However, I havn't figured out how to let an AI flight stop covering and continuing following their waypoints.
-- ATTACK_AREA works quite fine for AI flights, just remember to set the Radius to something quite large. I've noticed that Stukas like to make a ~10-15 km approach before actually starting their bombing run. Non Dive-bombers have a much more direct attack approach.
-- ATTACK_AREA has a default timeout of 20? minutes after which planes will continue on their previous route.
-- ATTACK_TARGET seems to work OK. After target is destroyed, planes will currently NOT resume their route.
-- Vehicle groups told to use Formation ROAD_COLUMN doesn't actually follow any roads. Not sure why yet, I'm explicitly giving them the appropriate Formation command.
-- Artillery fire - I havn't been able to get either mobile artillery or stationary artillery to fire even when trying to set area or target attack commands. Not sure if its a limitation in BoS or if my generated commands are faulty.
-- Line formations gets skewed if initial group heading is not 0, 90, 180, 270. (Working on that)


More stuff, not sure if its bugs in BoS or in my missions.
-- Ground unit engagement AI seems a bit weird. Tanks never turn their turrets and as far as I have seen, they don't turn to engage enemies even when just a few degrees to either side. If directly in front of each other, tanks seem to fire on enemy tanks.
-- However, I have seen a USSR heavy machine gun successfully engaging Pz III tanks driving by, turning with them and firing until the tank blows up (mostly after hitting the PZ III rear.

I will continue adding features when I have the time, but I would be very happy for any assistence offered by the community. Everything from feedback, payloadIds, coding help (GUI is HTML/javascript/jQuery, Backend is Java 8 / Spring) etc.

